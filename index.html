<html>
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0 ,
    maximum-scale=1.0 , user-scalable=no"/>
    
	<title>Rubani</title>
	<meta name="description" content="best odds bitcoin betting game." />
	<meta name="keywords" content="three.js, game, aviator, browser, javascript" />
	<meta name="author" content="earn and spend RUBS when you play" />
	<link rel="icon" type="image/png" href="favicon.png"/>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="/game.css" />
	<script src="https://cdn.jsdelivr.net/npm/three@0.139.2/build/three.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/three@0.139.2/examples/js/loaders/OBJLoader.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/three@0.139.2/examples/js/controls/OrbitControls.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/gsap.min.js"></script>
	<script src="https://telegram.org/js/telegram-web-app.js"></script>
	<script src="https://unpkg.com/tonweb@0.0.66/dist/tonweb.js"></script>
  
		<script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
		
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script src="https://unpkg.com/tonweb-mnemonic@1.0.1/dist/web/index.js"></script>


</head>
<body>
	<div class="game-holder" id="gameHolder">
		<div class="header">
			<div class="header__title-wrap">
				<h1 class="header__title">
					<span class="header__title-pre" id="gameprice" style="display:none"></span> </br>
					<span class="header__title-main">Rubani</span>
				</h1>
				<h2 class="header__tagline">play and beat your friends <!--<a href="https://bitsoko.org" class="hover-line"> bitsoko</a>--></h2>
			</div>
		</div>

			<div class="score" id="score" style=" visibility: hidden;   float: left;
    position: absolute;
    top: 0;
    z-index: 10;
    width: 100%;
    height: 80px;">
				<div class="score__content" id="level">
					<div class="score__label">multiple</div>
					<div class="score__value score__value--level" id="levelValue">1</div>
					<svg class="level-circle" id="levelCircle" viewbox="0 0 200 200">
						<circle id="levelCircleBgr" r="80" cx="100" cy="100" fill="none" stroke="#d1b790" stroke-width="24px" />
						<circle id="levelCircleStroke" r="80" cx="100" cy="100" fill="none" #f25346 stroke="#68c3c0" stroke-width="14px" stroke-dasharray="502" />
					</svg>
				</div>
				<div class="score__content score__content--fixed" id="dist">
					<div class="score__label">distance</div>
					<div class="score__value score__value--dist" id="distValue">0</div>
				</div>
				<div class="score__content score__content--fixed" id="coins">
					<div class="score__label">RUBS</div>
					<div class="score__value score__value--dist" id="coinsValue">0</div>
				</div>
				<div class="score__content" id="lifes">
					<div class="score__label">life</div>
					<img class="heart" src="heart.png"/>
					<img class="heart" src="heart.png"/>
					<img class="heart" src="heart.png"/>
				</div>
			</div>
			<nav class="navigate links" style="
    width: 100%;
    margin-bottom: 20px;
">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="#000000" fill="none" style="
    width: 32%;
    rotate: 90deg;
" id="swipe-down">
    <path d="M10.8654 9.68476L11.7434 4.76072C11.8889 3.94488 11.338 3.16689 10.513 3.02304C9.68807 2.87918 8.90138 3.42394 8.75591 4.23978L7 14.0879L6.85439 14.8511L4.88875 12.8372C4.17559 12.124 3.00086 12.1891 2.37081 12.9766C1.88873 13.5792 1.87541 14.4317 2.33844 15.049L5.35188 19.067C6.03575 19.9788 6.3777 20.4347 6.7892 20.7891C7.41699 21.3297 8.16928 21.7058 8.97845 21.8837C9.50883 22.0003 10.0787 22.0003 11.2185 22.0003H13.6206C15.9993 22.0003 18.0487 20.3245 18.521 17.9932L19.3889 13.7096L19.4767 13.2172C19.6222 12.4014 19.0713 11.6234 18.2463 11.4795C17.4214 11.3357 16.6347 11.8804 16.4892 12.6963L16.4014 13.1887M10.8654 9.68476L10.6021 11.162M10.8654 9.68476C11.0109 8.86892 11.7976 8.32417 12.6226 8.46802C13.4475 8.61188 13.9984 9.38986 13.8529 10.2057L13.6773 11.1905M13.6773 11.1905L13.5895 11.6829M13.6773 11.1905C13.8228 10.3747 14.6095 9.82992 15.4345 9.97377C16.2594 10.1176 16.8103 10.8956 16.6648 11.7115L16.577 12.2039" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    <path d="M22 4.5H15.5M22 4.5C22 3.79977 20.0057 2.49153 19.5 2M22 4.5C22 5.20023 20.0057 6.50847 19.5 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="#101232" fill="none" style="
    width: 32%;
" id="look-foward">
    <path d="M2 8C2 8 6.47715 3 12 3C17.5228 3 22 8 22 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
    <path d="M21.544 13.045C21.848 13.4713 22 13.6845 22 14C22 14.3155 21.848 14.5287 21.544 14.955C20.1779 16.8706 16.6892 21 12 21C7.31078 21 3.8221 16.8706 2.45604 14.955C2.15201 14.5287 2 14.3155 2 14C2 13.6845 2.15201 13.4713 2.45604 13.045C3.8221 11.1294 7.31078 7 12 7C16.6892 7 20.1779 11.1294 21.544 13.045Z" stroke="currentColor" stroke-width="1.5"></path>
    <path d="M15 14C15 12.3431 13.6569 11 12 11C10.3431 11 9 12.3431 9 14C9 15.6569 10.3431 17 12 17C13.6569 17 15 15.6569 15 14Z" stroke="currentColor" stroke-width="1.5"></path>
</svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="#101232" fill="none" style="
    width: 32%;
    rotate: 90deg;
" id="shoot-gun">
    <path d="M5.43876 16.2353C5.43876 15.9728 5.43048 15.7223 5.41491 15.4832M5.41491 15.4832C5.27345 13.3108 4.53006 12.0839 3.9244 11.4706C2.87884 12.5294 0.464067 16.7647 3.41663 19.9412L8.18741 17.8235C8.28323 18.2095 8.39847 18.5927 8.53467 18.9717C8.84621 19.8385 9.00197 20.272 9.51962 20.636C10.0373 21 10.6089 21 11.7522 21H12.2478C13.3911 21 13.9627 21 14.4804 20.636C14.998 20.272 15.1538 19.8385 15.4653 18.9717C15.6015 18.5927 15.7168 18.2095 15.8126 17.8235L20.5834 19.9412C23.5359 16.7647 21.1212 12.5294 20.0756 11.4706C19.4699 12.0839 18.7265 13.3108 18.5851 15.4832M5.41491 15.4832L6.51316 15.0678C7.12169 14.8376 7.42596 14.7225 7.59991 14.4928C7.77386 14.2631 7.80478 13.9083 7.86661 13.1989C8.25599 8.73199 10.4257 4.62034 12 3C13.5743 4.62034 15.744 8.73199 16.1334 13.1989C16.1952 13.9083 16.2261 14.2631 16.4001 14.4928C16.574 14.7225 16.8783 14.8376 17.4868 15.0678L18.5851 15.4832M18.5612 16.2353C18.5612 15.9728 18.5695 15.7223 18.5851 15.4832" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    <path d="M12 10L12 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    <path d="M20 8V7M20 4V3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    <path d="M4 8V7M4 4V3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" color="#000000" fill="none" style="
    width: 32%;
    position: absolute;
    bottom: 100px;
    left: 15;
    rotate: 90deg;
" id="swipe-up">
    <path d="M10.8654 9.68476L11.7434 4.76072C11.8889 3.94488 11.338 3.16689 10.513 3.02304C9.68807 2.87918 8.90138 3.42394 8.75591 4.23978L7 14.0879L6.85439 14.8511L4.88875 12.8372C4.17559 12.124 3.00086 12.1891 2.37081 12.9766C1.88873 13.5792 1.87541 14.4317 2.33844 15.049L5.35188 19.067C6.03575 19.9788 6.3777 20.4347 6.7892 20.7891C7.41699 21.3297 8.16928 21.7058 8.97845 21.8837C9.50883 22.0003 10.0787 22.0003 11.2185 22.0003H13.6206C15.9993 22.0003 18.0487 20.3245 18.521 17.9932L19.3889 13.7096L19.4767 13.2172C19.6222 12.4014 19.0713 11.6234 18.2463 11.4795C17.4214 11.3357 16.6347 11.8804 16.4892 12.6963L16.4014 13.1887M10.8654 9.68476L10.6021 11.162M10.8654 9.68476C11.0109 8.86892 11.7976 8.32417 12.6226 8.46802C13.4475 8.61188 13.9984 9.38986 13.8529 10.2057L13.6773 11.1905M13.6773 11.1905L13.5895 11.6829M13.6773 11.1905C13.8228 10.3747 14.6095 9.82992 15.4345 9.97377C16.2594 10.1176 16.8103 10.8956 16.6648 11.7115L16.577 12.2039" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    <path d="M15.5 4.5H22M15.5 4.5C15.5 3.79977 17.4943 2.49153 18 2M15.5 4.5C15.5 5.20023 17.4943 6.50847 18 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
</svg>
		</nav>
		<nav class="links" style="display:none;">
			<a href="http://tympanus.net/Development/TextRepetitionEffect/" class="hover-line">Previous demo</a>
			<a href="https://tympanus.net/codrops/?p=63296" class="hover-line">Article</a>
			<a href="https://github.com/Badestrand/TheAviator2" class="hover-line">GitHub</a>
		</nav>

		<div class="world" id="world">
			<canvas id="threejs-canvas"></canvas>
		</div>

		<div class="message--replay" id="replayMessage">
			<div>
				<p class="headline">You Lost!</p>
				<div class="lines">
					<div>
						<span>missed</span>
						<span><span id="score-coins-potential">129</span> / <span id="score-coins-lost">136</span></span>
					</div>
				</div>
			</div>
			<br/>
			Try again and reach the end to collect your winnings!

		</div>

		<div id="error">
			<p><b>Error</b></p>
			<p id="error-message"></p>
		</div>

		<div id="new-level">
			<p>Multiplier</p>
			<p>1</p>
		</div>

		<div id="intro-screen" class="visible">
		
			<!--
			<label for="name">Enter lightning address</label>

<input placeholder="your@bitcoin.address" type="email" id="address" name="address" style="padding: 10px;
    background: transparent;
    border: solid 1px var(--color-bg-score);
    color: var(--color-bg-score);
    border-radius: 10px;
    text-align: center;" required />

<div id="address-data">
			<p></p>
			<p></p>
		</div>
			-->
		
			<a id="start-button-single" type="button" style="visibility:hidden;">SINGLE ₿1 RUBS</a>
			<a id="start-button-multi" type="button" style="visibility:hidden;opacity:0.4;">MULTI coming-soon</a>
			<div id="ton-connect"></div>

<span id="start-message" style="visibility:visible;color: #0088CC;text-align: center;font-weight: bold;">COMING TO TON<svg width="32" height="32" viewBox="0 0 460 460" fill="none" xmlns="http://www.w3.org/2000/svg" style="
    display: block;
    margin-left: calc(50% - 16px);
">
<path fill-rule="evenodd" clip-rule="evenodd" d="M166 152L295 152C299.564 152 304.124 152.67 308.89 154.892C314.604 157.555 317.633 161.753 319.755 164.857C319.921 165.098 320.075 165.347 320.218 165.602C322.714 170.044 324 174.841 324 180C324 184.902 322.834 190.243 320.218 194.898C320.193 194.943 320.168 194.987 320.142 195.031L238.642 335.031C236.845 338.118 233.537 340.013 229.965 340C226.392 339.987 223.098 338.07 221.322 334.97L141.318 195.268C141.295 195.23 141.272 195.192 141.249 195.154C139.418 192.137 136.587 187.471 136.092 181.45C135.637 175.913 136.881 170.365 139.663 165.555C142.445 160.744 146.634 156.898 151.671 154.544C157.073 152.02 162.548 152 166 152ZM220 172L166 172C162.452 172 161.09 172.218 160.138 172.663C158.822 173.278 157.716 174.289 156.976 175.567C156.237 176.846 155.903 178.328 156.025 179.811C156.095 180.662 156.441 181.634 158.485 185.006C158.528 185.077 158.57 185.148 158.611 185.22L220 292.416V172ZM240 172V292.945L302.811 185.05C303.52 183.762 304 181.901 304 180C304 178.458 303.681 177.119 302.966 175.738C302.216 174.66 301.759 174.089 301.377 173.698C301.049 173.364 300.797 173.185 300.441 173.019C298.956 172.327 297.436 172 295 172L240 172Z" fill="#0088CC" style="
"></path>
<path fill-rule="evenodd" clip-rule="evenodd" d="M460 230C460 357.025 357.025 460 230 460C102.974 460 0 357.025 0 230C0 102.974 102.974 0 230 0C357.025 0 460 102.974 460 230ZM440 230C440 345.98 345.98 440 230 440C114.02 440 20 345.98 20 230C20 114.02 114.02 20 230 20C345.98 20 440 114.02 440 230Z" fill="#0088CC"></path>
</svg>
</span>

		</div>

		<div id="score-screen">
			<div>
				<p class="headline">Your Winnings!</p>
				<div class="lines">
					<div>
						<span>Earnings</span>
						<span><span id="score-coins-collected"></span> / <span id="score-coins-total"></span></span>
					</div>
					<div>
						<span>Enemies killed</span>
						<span><span id="score-enemies-killed"></span> / <span id="score-enemies-total"></span></span>
					</div>
					<div>
						<span>Shots fired</span>
						<span><span id="score-shots-fired"></span></span>
					</div>
					<div>
						<span>Damage taken</span>
						<span><span id="score-lifes-lost"></span></span>
					</div>
				</div>
			</div>
			<br/>
			Thanks for playing!
		</div>
	</div>


	<div id="attribution" style="display: none">
		<p>
			Sound effects obtained from https://www.zapsplat.com and https://freesound.org/.<br/>
			<br/>
			This game uses these following sounds from freesound:<br/>
			&nbsp;&nbsp;Sound "Crash" by user "Previsionary" (https://freesound.org/people/Previsionary/sounds/593677) licensed under Creative Commons 0<br/>
			&nbsp;&nbsp;Sound "Bubble Pop" by user "elmasmalo1" (https://freesound.org/people/elmasmalo1/sounds/376968) licensed under Attribution 3.0<br/>
			&nbsp;&nbsp;Sound "Bullet_Impact_2" by user "toxicwafflezz" (https://freesound.org/people/toxicwafflezz/sounds/150838) licensed under Attribution 3.0<br/>
			&nbsp;&nbsp;Sound "Pacific Ocean" by user "tim.kahn" (https://freesound.org/people/tim.kahn/sounds/174763) licensed under Attribution 3.0<br/>
			&nbsp;&nbsp;Sound "Airship propeller engine" by user "ilm0player" (https://freesound.org/people/ilm0player/sounds/578181/) licensed under Creative Commons 0<br/>
			&nbsp;&nbsp;Sound "Rock Smash" by user "NeoSpica" (https://freesound.org/people/NeoSpica/sounds/512243) licensed under Creative Commons 0<br/>
			&nbsp;&nbsp;Sound "Gun shot/bullet hit" by user "coolguy244e" (https://freesound.org/people/coolguy244e/sounds/266916) licensed under Creative Commons 0<br/>
			&nbsp;&nbsp;Sound "Pistol Shot" by user "LeMudCrab" (https://freesound.org/people/LeMudCrab/sounds/163456/) licensed under Creative Commons 0<br/>
			&nbsp;&nbsp;Sound "Water Splash" by user "Yin_Yang_Jake007" (https://freesound.org/people/Yin_Yang_Jake007/sounds/406087/) licensed under Attribution 3.0<br/>
			&nbsp;&nbsp;Sound "Coins - 01" by user "DWOBoyle" (https://freesound.org/people/DWOBoyle/sounds/140382/) licensed under Attribution 3.0<br/>
		</p>
	</div>
	<script>
  
  
</script>

	<script type="text/javascript" src="/colorDrone.js"></script>
	<script type="text/javascript" src="/newDrone.js"></script>
	<script type="text/javascript" src="/oldDrone.js"></script>
	<script type="text/javascript" src="/airplane.js"></script>
	<script type="text/javascript" src="/car.js"></script>
	<script type="text/javascript" src="/game.js"></script>
	<script src="https://gateway.bitsoko.org/bitsAssets/js/storeManager.js" async=""></script>
	<script src="https://gateway.bitsoko.org/bitsAssets/js/connect.js" async=""></script>
	<script src="https://gateway.bitsoko.org/bitsAssets/js/globalServices.js" async=""></script>
	<script src="https://gateway.bitsoko.org/bitsAssets/js/raphQR.js" async=""></script>
	<script src="https://gateway.bitsoko.org/bitsAssets/js/qrcodesvg.js" async=""></script>
	<script  async="">
	async function initTon(){

connector = new TonConnectSDK.TonConnect();

const unsubscribe = connector.onStatusChange(
    walletInfo => {
        // update state/reactive variables to show updates in the ui
        
        console.log(walletInfo);
    } 
);



// Should correspond to the wallet that user selects
const walletConnectionSource = {
    universalLink: 'https://app.tonkeeper.com/ton-connect',
    bridgeUrl: 'https://bridge.tonapi.io/bridge'
}

const universalLink = connector.connect(walletConnectionSource);

connector.restoreConnection();

console.log(TonConnectSDK.isTelegramUrl());

  
    tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://rubani.bitsoko.org/tonconnect-manifest.json',
        buttonRootId: 'ton-connect'
    });
    tonConnectUI.uiOptions = {
      twaReturnUrl: 'https://t.me/rubani_bot'
  };
  
  const unsubscribeModal = tonConnectUI.onModalStateChange(
    (state) => {
        // update state/reactive variables to show updates in the ui
        // state.status will be 'opened' or 'closed'
        // if state.status is 'closed', you can check state.closeReason to find out the reason
        console.log(state);
    }
);
    
    
  const walletsList = await tonConnectUI.getWallets();
  console.log(walletsList);
  
  const currentWallet = tonConnectUI.wallet;
const currentWalletInfo = tonConnectUI.walletInfo;
const currentAccount = tonConnectUI.account;
const currentIsConnectedStatus = tonConnectUI.connected;

console.log(currentWallet, currentWalletInfo, currentAccount, currentIsConnectedStatus);


// create a new instance of TonConnectUI
//const provider = new TonConnectUI();
// create a new instance of TonConnectProvider

tonweb = new TonWeb(new TonWeb.HttpProvider('https://testnet.toncenter.com/api/v2/jsonRPC', {apiKey: 'YOUR_TESTNET_TONCENTER_API_KEY'}));
walletAddress = "kQC2dIk7SZR7CXT_xFISznRyUEK4-uHPri43KGmZTPICCd5-";
const keyPair = await window.TonWeb.mnemonic.mnemonicToKeyPair(mnemonic.split(" "));

  const WalletClass = tonweb.wallet.all.v4R2;

  const wallet = new WalletClass(tonweb.provider, {
    publicKey: keyPair.publicKey
  });

const jettonWallet = tonweb.token.jetton.JettonWallet(tonweb.provider,{address: walletAddress});
const data = await jettonWallet.getData();
console.log('Jetton balance:', data.balance.toString());
console.log('Jetton owner address:', data.ownerAddress.toString(true, true, true));
// It is important to always check that Jetton Master indeed recognize wallet
const jettonMinter = tonweb.token.jetton.JettonMinter(tonweb.provider, {address: data.jettonMinterAddress.toString(false)});
const expectedJettonWalletAddress = await jettonMinter.getJettonWalletAddress(data.ownerAddress.toString(false));
if (expectedJettonWalletAddress.toString(false) !== tonweb.utils.Address(walletAddress).toString(false)) {
  console.error('jetton minter does not recognize the wallet');
}

console.log('Jetton master address:', data.jettonMinterAddress.toString(true, true, true));
}
initTon();
	</script>
</body>
</html>
